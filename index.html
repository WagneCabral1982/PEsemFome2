<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>PE sem Fome ‚Äì Prot√≥tipo com Regras C/D/E + NIS de exemplo</title>
<style>
  :root{
    --blue:#003f9e; --blue-2:#0b58d0; --text:#1f2937; --muted:#6b7280;
    --ok:#198754; --warn:#f59e0b; --danger:#dc3545; --card:#fff; --bg:#f3f4f6; --border:#e5e7eb;
  }
  *{box-sizing:border-box}
  body{margin:0;background:var(--bg);color:var(--text);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial}
  a{color:#0ea5e9;text-decoration:none}
  a:hover{text-decoration:underline}

  /* HERO (tela inicial) */
  .hero{background:var(--blue); color:#fff; padding:48px 20px}
  .hero .wrap{max-width:1100px;margin:0 auto}
  .hero h1{font-size:clamp(26px,4vw,36px);margin:0 0 10px}
  .hero p{max-width:960px;margin:0 0 24px;opacity:.95}
  .cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:24px;margin-top:20px}
  .card{background:#0b47b7; border:1px solid rgba(255,255,255,.2); border-radius:18px; padding:28px; text-align:center; cursor:pointer; transition:.2s}
  .card:hover{transform:translateY(-3px); background:#0d51cc}
  .icon{width:86px;height:86px;border-radius:50%;display:grid;place-items:center;margin:4px auto 14px; background:#fff1; border:2px solid #fff3; font-size:36px}
  .card h3{margin:8px 0 10px; font-size:22px; color:#fff}
  .card p{margin:0; color:#dbeafe}
  .hero .help{margin-top:28px; text-align:center; opacity:.9}

  /* Page shells */
  .page{max-width:980px;margin:-24px auto 40px;background:var(--card);border:1px solid var(--border);border-radius:14px;overflow:hidden}
  .page header{padding:18px 22px;border-bottom:1px solid var(--border);background:#fff}
  .page header h2{margin:0;font-size:20px}
  .content{padding:18px 22px}
  .hidden{display:none!important}

  /* Form sections */
  .section{border:1px solid var(--border);border-radius:12px;padding:16px;margin-bottom:18px;background:#fff}
  .section h3{margin:0 0 12px;font-size:16px;display:flex;gap:10px;align-items:center}
  .chip{font-size:12px;font-weight:700;border-radius:999px;padding:4px 10px;line-height:1}
  .chip-req{background:var(--ok);color:#fff}
  .chip-opt{background:#e5f0ff;color:#064eaa;border:1px solid #cfe3ff}
  .row{display:grid;grid-template-columns:repeat(12,1fr); gap:14px}
  .col-6{grid-column:span 6} .col-12{grid-column:span 12}
  label{font-weight:600;display:block;margin:6px 0}
  .hint{font-size:12px;color:var(--muted);margin-left:8px}
  input,select,button{width:100%;padding:12px;border:1px solid var(--border);border-radius:10px;background:#fff}
  input:focus,select:focus{outline:3px solid #bfdbfe;border-color:#93c5fd}
  .radio-line{display:flex;gap:18px;align-items:center}
  .btns{display:flex;gap:10px;justify-content:flex-end;margin-top:14px}
  .btn{border:0;border-radius:10px;padding:12px 16px;font-weight:700;cursor:pointer}
  .btn-blue{background:var(--blue-2);color:#fff}
  .btn-gray{background:#e5e7eb}
  .btn-lite{background:#f1f5f9}
  .location-tools{display:flex;gap:10px;flex-wrap:wrap}

  /* Resultados */
  .banner{border-radius:12px;padding:16px;margin-bottom:16px}
  .banner-ok{background:#d4edda;color:#155724;border:1px solid #c3e6cb}
  .banner-warn{background:#fff3cd;color:#856404;border:1px solid #ffeeba}
  .equip-card{border:1px solid var(--border);border-radius:12px;padding:14px;margin:10px 0;border-left:6px solid}
  .tipo-centro-pop{border-left-color:#dc3545}
  .tipo-creas{border-left-color:#f59e0b}
  .tipo-posto{border-left-color:#6f42c1}
  .tipo-cras{border-left-color:#198754}
  .tipo-cozinha{border-left-color:#0b58d0}
  .equip-head{display:flex;justify-content:space-between;gap:14px}
  .equip-name{font-weight:800}
  .muted{color:#6b7280}
  @media (max-width:800px){.col-6{grid-column:span 12}}
</style>
</head>
<body>

<!-- ====== TELA INICIAL ====== -->
<section class="hero" id="home">
  <div class="wrap">
    <h1>Bem-vindo ao PE Sem Fome</h1>
    <p>Neste portal voc√™ pode consultar servi√ßos de assist√™ncia alimentar e prote√ß√£o social que podem direcionar voc√™ ou algu√©m em situa√ß√£o de inseguran√ßa alimentar e nutricional para servi√ßos que ajudem a superar essa situa√ß√£o.</p>
    <h2 style="margin:0 0 12px;font-size:22px;font-weight:700">Selecione para quem a ajuda est√° destinada</h2>

    <div class="cards" role="list">
      <button class="card" onclick="abrirFormulario('mim')" role="listitem" aria-label="Abrir formul√°rio para mim">
        <div class="icon">üë§</div>
        <h3>Para mim</h3>
        <p>Encontre servi√ßos de assist√™ncia alimentar e prote√ß√£o social perto de voc√™.</p>
      </button>

      <button class="card" onclick="abrirFormulario('outro')" role="listitem" aria-label="Abrir formul√°rio para outra pessoa">
        <div class="icon">ü§ù</div>
        <h3>Outra pessoa</h3>
        <p>Encontre servi√ßos para ajudar algu√©m que precisa do seu apoio.</p>
      </button>
    </div>

    <div class="help">Precisa de ajuda? <a href="#">Fale conosco</a></div>
  </div>
</section>

<!-- ====== FORMUL√ÅRIO ====== -->
<section id="form-page" class="page hidden" aria-live="polite">
  <header><h2 id="form-title">Formul√°rio</h2></header>
  <div class="content">

    <!-- Amigo ou Profissional (apenas OUTRA PESSOA) -->
    <div id="sec-amigo-prof" class="section hidden">
      <h3><span class="chip chip-req">Obrigat√≥rio</span> Amigo ou Profissional</h3>
      <div class="radio-line" role="radiogroup" aria-label="Selecione o seu papel">
        <label><input type="radio" name="papel" value="amigo"> Cidad√£o Amigo</label>
        <label><input type="radio" name="papel" value="profissional"> Profissional</label>
      </div>
    </div>

    <!-- Identifica√ß√£o (opcional) -->
    <div class="section">
      <h3><span class="chip chip-opt">Opcional</span> Identifica√ß√£o</h3>
      <div class="row">
        <div class="col-6">
          <label for="cpf">CPF <span class="hint">(Opcional)</span></label>
          <input id="cpf" inputmode="numeric" maxlength="11" placeholder="Digite o CPF (apenas n√∫meros)">
        </div>
        <div class="col-6">
          <label for="nis">NIS <span class="hint">(Opcional)</span></label>
          <div style="display:flex;gap:8px">
            <input id="nis" inputmode="numeric" maxlength="11" placeholder="Digite o NIS (apenas n√∫meros)">
            <button class="btn btn-lite" type="button" id="btn-nis-demo" title="Preencher com NIS de exemplo">Usar NIS de exemplo</button>
          </div>
          <small class="hint">NIS de exemplo para testes do prot√≥tipo.</small>
        </div>
      </div>
    </div>

    <!-- Localiza√ß√£o (obrigat√≥rio) -->
    <div class="section">
      <h3><span class="chip chip-req">Obrigat√≥rio</span> Localiza√ß√£o</h3>
      <div class="row">
        <div class="col-6">
          <label for="municipio">Munic√≠pio</label>
          <select id="municipio" required>
            <option value="">Selecione</option>
            <option value="recife">Recife</option>
            <option value="olinda">Olinda</option>
            <option value="jaboatao">Jaboat√£o dos Guararapes</option>
            <option value="paulista">Paulista</option>
            <option value="caruaru">Caruaru</option>
            <option value="petrolina">Petrolina</option>
          </select>
        </div>
        <div class="col-6">
          <label for="bairro">Bairro</label>
          <select id="bairro" required disabled>
            <option value="">Primeiro selecione um munic√≠pio</option>
          </select>
        </div>
        <div class="col-12">
          <div class="location-tools">
            <button type="button" class="btn btn-blue" id="btn-geo">üìç Usar minha localiza√ß√£o</button>
            <button type="button" class="btn btn-gray" id="btn-clear">Limpar localiza√ß√£o</button>
          </div>
          <small id="geo-status" class="hint"></small>
        </div>
      </div>

      <div class="row" style="margin-top:8px">
        <div class="col-12">
          <label>Situa√ß√£o de Rua</label>
          <div class="radio-line">
            <label><input type="radio" name="rua" value="sim"> Sim</label>
            <label><input type="radio" name="rua" value="nao" checked> N√£o</label>
          </div>
        </div>
      </div>
    </div>

    <!-- Dados Pessoais (opcional) -->
    <div class="section">
      <h3><span class="chip chip-opt">Opcional</span> <span id="pessoaTitle">Caso deseje, fale mais sobre voc√™</span></h3>
      <div class="row">
        <div class="col-6">
          <label for="nome">Nome completo <span class="hint">(Opcional)</span></label>
          <input id="nome" placeholder="Seu nome completo...">
        </div>
        <div class="col-6">
          <label for="social">Nome social (se houver) <span class="hint">(Opcional)</span></label>
          <input id="social" placeholder="Nome social...">
        </div>
        <div class="col-6">
          <label for="genero">G√™nero <span class="hint">(Opcional)</span></label>
          <select id="genero">
            <option value="">Selecione</option><option>Masculino</option><option>Feminino</option>
            <option>N√£o-bin√°rio</option><option>Outro</option>
          </select>
        </div>
        <div class="col-6">
          <label for="nasc">Data de nascimento <span class="hint">(Opcional)</span></label>
          <input id="nasc" type="date">
        </div>
        <div class="row" style="margin-top:8px">
        <div class="col-12">
          <label>Voc√™ √© brasileiro(a)?</label>
          <div class="radio-line">
            <label><input type="radio" name="Voc√™ √© brasileiro(a)?" value="sim"> Sim</label>
            <label><input type="radio" name="Voc√™ √© brasileiro(a)?" value="nao" checked> N√£o</label>
          </div>
        </div>
      </div>
    </div>
        <div class="col-12">
          <label for="endereco">Endere√ßo <span class="hint">(Opcional)</span></label>
          <input id="endereco" placeholder="Seu endere√ßo completo">
        </div>
      </div>
    </div>

    <div class="btns">
      <button class="btn btn-gray" type="button" onclick="voltarHome()">Fechar</button>
      <button class="btn btn-blue" type="button" onclick="validarEEnviar()">Concluir</button>
    </div>
  </div>
</section>

<!-- ====== RESULTADO DA CONSULTA ====== -->
<section id="resultado-page" class="page hidden" aria-live="polite">
  <header><h2>Resultado da Consulta</h2></header>
  <div class="content" id="resultado-content">

    <!-- Se√ß√£o Cad√önico -->
    <div id="cadunico-box" class="banner hidden"></div>

    <!-- Lista de Equipamentos -->
    <div id="lista-equip"></div>

    <div class="btns">
      <button class="btn btn-gray" type="button" onclick="voltarForm()">Voltar</button>
      <button class="btn btn-blue" type="button" onclick="voltarHome()">Concluir</button>
    </div>
  </div>
</section>

<script>
  // ------- Bairros (exemplo) -------
  const bairrosPorMunicipio = {
    recife:['Boa Viagem','Boa Vista','Casa Amarela','Derby','Espinheiro','V√°rzea'],
    olinda:['Bairro Novo','Carmo','Jardim Brasil','Peixinhos','Rio Doce'],
    jaboatao:['Barra de Jangada','Candeias','Cavaleiro','Prazeres'],
    paulista:['Arthur Lundgren I','Jardim Paulista','Maranguape I','Paratibe'],
    caruaru:['Centro','Divin√≥polis','Indian√≥polis','Rendeiras','Salgado'],
    petrolina:['Centro','Jardim Amazonas','Jardim S√£o Paulo','Palhinhas']
  };

  // ------- Base de equipamentos (mock) -------
  const baseEquip = {
    'centro-pop': {tipo:'Centro POP', css:'tipo-centro-pop', itens:[
      {nome:'Centro POP ‚Äì Centro', dist:0.9, endereco:'Rua da Aurora, 123', contato:'(81) 3333-4444'}
    ]},
    'creas': {tipo:'CREAS', css:'tipo-creas', itens:[
      {nome:'CREAS ‚Äì Afogados', dist:1.2, endereco:'Rua 21 de Abril, 1092', contato:'(81) 3355-3671'}
    ]},
    'posto': {tipo:'Posto de Atendimento do Cad√önico', css:'tipo-posto', itens:[
      {nome:'Posto ‚Äì Boa Vista', dist:1.0, endereco:'Av. Conde da Boa Vista, 123', contato:'(81) 3222-1234'}
    ]},
    'cras': {tipo:'CRAS', css:'tipo-cras', itens:[
      {nome:'CRAS ‚Äì Bongi', dist:1.7, endereco:'Av. Gen. San Martin, 1083', contato:'(81) 3225-9440'}
    ]},
    'cozinha': {tipo:'Cozinha Comunit√°ria', css:'tipo-cozinha', itens:[
      {nome:'Cozinha ‚Äì Gurup√©', dist:2.3, endereco:'Rua Gurup√©, 253', contato:'(81) 99362-9916'}
    ]}
  };

  // ------- Estado & refs -------
  let persona = null;
  const home = document.getElementById('home');
  const formPage = document.getElementById('form-page');
  const resultPage = document.getElementById('resultado-page');
  const formTitle = document.getElementById('form-title');
  const pessoaTitle = document.getElementById('pessoaTitle');
  const secAmigoProf = document.getElementById('sec-amigo-prof');

  const municipio = document.getElementById('municipio');
  const bairro = document.getElementById('bairro');
  const btnGeo = document.getElementById('btn-geo');
  const btnClear = document.getElementById('btn-clear');
  const geoStatus = document.getElementById('geo-status');

  const cpf = document.getElementById('cpf');
  const nis = document.getElementById('nis');
  const genero = document.getElementById('genero');

  const btnNisDemo = document.getElementById('btn-nis-demo');

  const cadunicoBox = document.getElementById('cadunico-box');
  const listaEquip = document.getElementById('lista-equip');

  // ------- Navega√ß√£o -------
  function abrirFormulario(tipo){
    persona = tipo; // 'mim' | 'outro'
    home.classList.add('hidden');
    resultPage.classList.add('hidden');
    formPage.classList.remove('hidden');

    if (persona === 'outro'){
      formTitle.textContent = 'Formul√°rio ‚Äî Outra pessoa';
      secAmigoProf.classList.remove('hidden');
      pessoaTitle.textContent = 'Caso deseje, fale mais sobre quem voc√™ est√° ajudando';
    } else {
      formTitle.textContent = 'Formul√°rio ‚Äî Para mim';
      secAmigoProf.classList.add('hidden');
      pessoaTitle.textContent = 'Caso deseje, fale mais sobre voc√™';
      document.querySelectorAll('input[name="papel"]').forEach(r=>r.checked=false);
    }
  }
  function voltarHome(){ formPage.classList.add('hidden'); resultPage.classList.add('hidden'); home.classList.remove('hidden'); }
  function voltarForm(){ resultPage.classList.add('hidden'); formPage.classList.remove('hidden'); }

  // ------- Bairros por munic√≠pio -------
  municipio.addEventListener('change', ()=>{
    bairro.innerHTML = '';
    const m = municipio.value;
    if (m && bairrosPorMunicipio[m]){
      bairro.disabled = false;
      bairro.append(new Option('Selecione um bairro',''));
      bairrosPorMunicipio[m].forEach(b => bairro.append(new Option(b, b)));
    } else {
      bairro.disabled = true;
      bairro.append(new Option('Primeiro selecione um munic√≠pio',''));
    }
  });

  // ------- Geolocaliza√ß√£o (simulada) -------
  btnGeo.addEventListener('click', ()=>{
    geoStatus.textContent = 'Obtendo localiza√ß√£o...';
    if(!navigator.geolocation){ geoStatus.textContent = 'Geolocaliza√ß√£o n√£o suportada.'; return; }
    navigator.geolocation.getCurrentPosition(()=>{
      municipio.value='recife'; municipio.dispatchEvent(new Event('change'));
      setTimeout(()=>{ bairro.value='Boa Viagem'; geoStatus.textContent='Localiza√ß√£o detectada: Recife / Boa Viagem (simulado).'; }, 120);
    }, ()=> geoStatus.textContent='N√£o foi poss√≠vel obter sua localiza√ß√£o.');
  });
  btnClear.addEventListener('click', ()=>{
    municipio.value=''; municipio.dispatchEvent(new Event('change')); geoStatus.textContent='';
  });

  // ------- NIS de exemplo (da imagem) -------
  btnNisDemo.addEventListener('click', ()=>{
    nis.value = '16860460980'; // 1.686.046.098-0 sem pontua√ß√£o
    nis.dispatchEvent(new Event('input'));
  });

  // ------- Bot√£o Concluir: valida + simula consulta + monta resultado -------
  function validarEEnviar(){
    const erros = [];
    if(!municipio.value || !bairro.value) erros.push('Localiza√ß√£o (Munic√≠pio e Bairro)');
    const rua = document.querySelector('input[name="rua"]:checked')?.value;
    if(!rua) erros.push('Situa√ß√£o de Rua');
    if(persona==='outro' && !document.querySelector('input[name="papel"]:checked')) erros.push('Amigo ou Profissional');

    if(erros.length){ alert('Por favor, preencha: ' + erros.join(', ') + '.'); return; }

    // Se informou CPF/NIS, simulamos a consulta para decidir C/D.
    const temId = !!(cpf.value.trim() || nis.value.trim());
    let localizado = false;
    let mensagemCad = '';

    if (temId){
      const seed = (cpf.value + '|' + nis.value).split('').reduce((a,c)=>a+c.charCodeAt(0),0);
      localizado = (seed % 2) === 0; // 50/50 para demo

      if (localizado){
        // C ‚Äî localizado no Cad√önico
        const mulher = (genero.value || '').toLowerCase().includes('fem');
        const linhaMae = mulher
          ? '‚Ä¢ (Se mulher) <a href="https://www.maesdepernambuco.pe.gov.br" target="_blank" rel="noopener">M√£es de Pernambuco (www.maesdepernambuco.pe.gov.br)</a>'
          : '‚Ä¢ (Se mulher) M√£es de Pernambuco (www.maesdepernambuco.pe.gov.br)';

        mensagemCad =
`Voc√™ est√° no Cad√önico e pode ter direito aos seguintes servi√ßos:
‚Ä¢ Bolsa Fam√≠lia
${linhaMae}
‚Ä¢ Benef√≠cios Eventuais
‚Ä¢ Cozinhas Comunit√°rias

Para receber orienta√ß√µes, procure o CRAS mais pr√≥ximo.`;
        renderResultado({ tipo:'C', texto:mensagemCad, rua });
      } else {
        // D ‚Äî n√£o localizado
        mensagemCad = 'Voc√™ ainda n√£o est√° no Cad√önico, mas pode buscar apoio.';
        renderResultado({ tipo:'D', texto:mensagemCad, rua });
      }
    } else {
      // E ‚Äî n√£o informou CPF/NIS (se√ß√£o Cad√önico vazia)
      renderResultado({ tipo:'E', texto:'', rua });
    }

    formPage.classList.add('hidden');
    resultPage.classList.remove('hidden');
  }

  // ------- Montagem da tela de resultados -------
  function renderResultado({tipo, texto, rua}){
    // Se√ß√£o Cad√önico
    if (tipo === 'C'){
      cadunicoBox.className = 'banner banner-ok';
      cadunicoBox.innerHTML = texto.replace(/\n/g,'<br/>');
      cadunicoBox.classList.remove('hidden');
    } else if (tipo === 'D'){
      cadunicoBox.className = 'banner banner-warn';
      cadunicoBox.textContent = texto;
      cadunicoBox.classList.remove('hidden');
    } else { // E
      cadunicoBox.classList.add('hidden');
      cadunicoBox.textContent = '';
    }

    // Lista de Equipamentos
    listaEquip.innerHTML = '';
    const ordem = (rua === 'sim')
      ? ['centro-pop','creas','posto','cras','cozinha']  // Sequ√™ncia A
      : ['posto','cras','cozinha'];                      // Sequ√™ncia B

    ordem.forEach(key=>{
      const grupo = baseEquip[key];
      grupo.itens
        .sort((a,b)=>a.dist-b.dist)
        .forEach(item=>{
          const c = document.createElement('div');
          c.className = `equip-card ${grupo.css}`;
          c.innerHTML = `
            <div class="equip-head">
              <div>
                <div class="equip-name">${item.nome}</div>
                <div class="muted">${grupo.tipo} ‚Ä¢ ${item.dist.toFixed(1)} km</div>
              </div>
              <div class="muted">${item.contato||''}</div>
            </div>
            <div class="muted">${item.endereco||''}</div>
          `;
          listaEquip.appendChild(c);
        });
    });
  }

  // Expor a√ß√µes
  window.abrirFormulario = abrirFormulario;
  window.validarEEnviar = validarEEnviar;
  window.voltarHome = voltarHome;
  window.voltarForm = voltarForm;

  // Normalizar CPF/NIS para d√≠gitos
  [document.getElementById('cpf'), document.getElementById('nis')].forEach(el =>
    el.addEventListener('input', ()=> el.value = el.value.replace(/\D+/g,'')));
</script>
</body>
</html>



